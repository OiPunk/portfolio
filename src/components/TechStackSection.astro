---
export interface TechStackItemType {
  icon: string;
  name: string;
  iconClass: string;
}

const techStackItems: TechStackItemType[] = [
  { icon: 'fab fa-java', name: 'Java', iconClass: 'text-red-500' },
  { icon: 'fas fa-leaf', name: 'Spring Boot', iconClass: 'text-green-500' },
  { icon: 'fas fa-cloud', name: 'Spring Cloud', iconClass: 'text-green-400' },
  { icon: 'fas fa-database', name: 'MySQL', iconClass: 'text-blue-500' },
  { icon: 'fas fa-server', name: 'Redis', iconClass: 'text-red-400' },
  { icon: 'fab fa-docker', name: 'Docker', iconClass: 'text-blue-400' },
  { icon: 'fas fa-dharmachakra', name: 'Kubernetes', iconClass: 'text-blue-600' },
  { icon: 'fas fa-envelope', name: 'RabbitMQ', iconClass: 'text-orange-500' },
  { icon: 'fab fa-git-alt', name: 'Git', iconClass: 'text-orange-600' },
  { icon: 'fab fa-linux', name: 'Linux', iconClass: 'text-yellow-500' },
  { icon: 'fas fa-network-wired', name: 'Nginx', iconClass: 'text-green-600' },
  { icon: 'fab fa-python', name: 'Python', iconClass: 'text-blue-500' },
  { icon: 'fas fa-brain', name: 'AI/LLM', iconClass: 'text-purple-500' },
  { icon: 'fas fa-sitemap', name: 'Microservices', iconClass: 'text-cyan-400' },
  { icon: 'fas fa-project-diagram', name: 'System Design', iconClass: 'text-pink-400' },
  { icon: 'fab fa-github', name: 'GitHub', iconClass: 'text-gray-300' },
];
---

<section id="techstack" class="relative h-16 bg-gray-800/50 backdrop-blur-sm flex items-center overflow-hidden">
  <div id="marquee" class="flex items-center gap-8 animate-[marquee_25s_linear_infinite]">
    {techStackItems.map((item) => (
      <div class="flex items-center gap-2 text-gray-400">
        <i class={`${item.icon} text-2xl ${item.iconClass}`}></i>
        {item.name}
      </div>
    ))}
    <!-- Duplicate for seamless marquee -->
    {techStackItems.map((item) => (
      <div class="flex items-center gap-2 text-gray-400">
        <i class={`${item.icon} text-2xl ${item.iconClass}`}></i>
        {item.name}
      </div>
    ))}
  </div>
</section>

<script>
  const marquee = document.getElementById('marquee');
  if (marquee) {
    let totalWidth = 0;
    for (let item of marquee.children) {
      totalWidth += (item as HTMLElement).offsetWidth + 32; // Include gap-8 (32px)
    }
    marquee.style.width = `${totalWidth}px`;
    marquee.addEventListener('mouseenter', () => {
      marquee.style.animationPlayState = 'paused';
    });
    marquee.addEventListener('mouseleave', () => {
      marquee.style.animationPlayState = 'running';
    });
  }
</script>